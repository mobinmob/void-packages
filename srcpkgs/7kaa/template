# Template file for '7kaa'
pkgname=7kaa
version=2.15.6
revision=1
_v_7kaa_music=${version%.*}
create_wrksrc=yes
build_wrksrc=7kaa
build_style=gnu-configure
hostmakedepends="autoconf automake gettext-devel pkg-config tar"
makedepends="libcurl-devel libenet-devel libopenal-devel SDL2-devel"
short_desc="Seven Kingdoms: Ancient Adversaries"
maintainer="travankor <travankor@tuta.io>"
license="GPL-2.0-or-later, custom:Seven_Kingdoms_Music_Soundtrack"
homepage="https://7kfans.com/"
distfiles="${SOURCEFORGE_SITE}/skfans/7KAA%20${version}/7kaa-${version}.tar.gz
 https://www.7kfans.com/downloads/${pkgname}-music-${_v_7kaa_music}.tar.bz2"
checksum="2c79b98dc04d79e87df7f78bcb69c1668ce72b22df0384f84b87bc550a654095
 b0d767b6e25719a14f5f34a93744a8022d7bc24af66275bee54dfc788695c1c3"
replaces="7kaa-data>=0"

post_extract() {
	mv 7kaa-${version} 7kaa
	mv 7kaa-music 7kaa
}

pre_configure() {
	autoreconf -vfi
}

post_install() {
	vcopy 7kaa-music/MUSIC usr/share/7kaa
	vlicense 7kaa-music/COPYING-Music.txt
	vmkdir usr/share/pixmaps
	vinstall "${FILESDIR}"/7k.xpm 644 usr/share/pixmaps/
	vmkdir usr/share/applications
	vinstall "${FILESDIR}"/7kaa.desktop 644 usr/share/applications/
}
